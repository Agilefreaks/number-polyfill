(function(){(function(e){var t,i,n;return i=document.createElement("input"),i.setAttribute("type","number"),"text"!==i.type?(e.fn.inputNumber=function(){return e(this)},void 0):(e.fn.inputNumber=function(){return console.log("found "+e(this).filter('input[type="number"]').length+" elements."),e(this).filter('input[type="number"]').each(function(){console.log("Creating new polyfill."),n.polyfills.push(new n(this))}),e(this)},t=function(e,i){var n,o;if(null==i){if("object"==typeof e&&e.constructor===t)this.num=e.num,this.precision=e.precision;else if("number"==typeof e||"object"==typeof e&&e.constructor===Number){for(o=e,n=0;o>Math.floor(o);)o=e*Math.pow(10,n++);this.num=o,this.precision=n}}else this.num=e,this.precision=i},t.prototype.raise=function(e){this.num=this.num*Math.pow(10,e),this.precision+=e},t.prototype.add=function(e){var i;return e=new t(e),this.precision>e.precision?e.raise(this.precision-e.precision):this.precision<e.precision&&this.raise(e.precision-this.precision),i=new t(this.num+e.num,this.precision),i.reduce(),i},t.prototype.subtract=function(e){var i;return e=new t(e),this.precision>e.precision?e.raise(this.precision-e.precision):this.precision<e.precision&&this.raise(e.precision-this.precision),i=new t(this.num-e.num,this.precision),i.reduce(),i},t.prototype.reduce=function(){var e;for(e=0;0===this.num%Math.pow(10,e)&&this.precision>e;)e++;e>0&&(this.num=this.num/Math.pow(10,e),this.precision-=e)},t.prototype.toFloat=function(){return this.num/Math.pow(10,this.precision)},t.prototype.toString=function(){return""+this.toFloat()},t.prototype.mod=function(e){return this.toFloat()%e},n=function(t){var i,n,o,s,r,l,u,a=this;this.elem=e(t),l=this.elem.outerHeight()/2+"px",this.upBtn=e("<div/>",{"class":"number-spin-btn number-spin-btn-up",style:"height: "+l}),this.downBtn=e("<div/>",{"class":"number-spin-btn number-spin-btn-down",style:"height: "+l}),i=e("<div/>",{"class":"number-spin-btn-container"}),n=e("<span/>",{style:"white-space: nowrap"}),this.upBtn.appendTo(i),this.downBtn.appendTo(i),this.elem.wrap(n),i.insertAfter(this.elem),console.log("Added buttons."),r=function(e){e.preventDefault(),0>e.originalEvent.detail?a.increment():a.decrement()},u=function(e){e.preventDefault(),e.originalEvent.wheelDelta>0?a.increment():a.decrement()},console.log("Adding element event handlers."),this.elem.on({focus:function(){a.elem.on({DOMMouseScroll:r,mousewheel:u})},blur:function(){a.elem.off({DOMMouseScroll:r,mousewheel:u})},keypress:function(e){var t,i;38===e.keyCode?a.increment():40===e.keyCode?a.decrement():8!==(t=e.keyCode)&&9!==t&&35!==t&&36!==t&&37!==t&&39!==t&&46!==t&&45!==(i=e.which)&&48!==i&&49!==i&&50!==i&&51!==i&&52!==i&&53!==i&&54!==i&&55!==i&&56!==i&&57!==i&&e.preventDefault()},change:function(e){var t,i;null!=e.originalEvent&&(i=a.getParams(),t=a.clipValues(i.val,i.min,i.max),t=a.matchStep(t,i.min,i.max,i.step,i.stepDecimal),a.elem.val(t))}}),console.log("Adding button event handlers."),this.upBtn.on("mousedown",function(){var t,i;a.increment(),i=function(){a.increment(),a.timeoutID=window.setTimeout(i,10)},t=function(){window.clearTimeout(a.timeoutID),e(document).off("mouseup",t),a.upBtn.off("mouseleave",t)},e(document).on("mouseup",t),a.upBtn.on("mouseleave",t),a.timeoutID=window.setTimeout(i,700)}),this.downBtn.on("mousedown",function(){var t,i;a.decrement(),i=function(){a.decrement(),a.timeoutID=window.setTimeout(i,10)},t=function(){window.clearTimeout(a.timeoutID),e(document).off("mouseup",t),a.downBtn.off("mouseleave",t)},e(document).on("mouseup",t),a.downBtn.on("mouseleave",t),a.timeoutID=window.setTimeout(i,700)}),this.elem.css("textAlign","right"),"1"!==this.elem.css("opacity")&&i.css("opacity",this.elem.css("opacity")),"visible"!==this.elem.css("visibility")&&i.css("visibility",this.elem.css("visibility")),console.log("Adding mutation observers."),"undefined"!=typeof WebKitMutationObserver&&null!==WebKitMutationObserver||"undefined"!=typeof MutationObserver&&null!==MutationObserver?(o=function(e){var t,n,o;for(n=0,o=e.length;o>n;n++)t=e[n],"attributes"===t.type&&("class"===t.attributeName?i.removeClass(t.oldValue).addClass(a.elem.className):"style"===t.attributeName&&i.css({opacity:a.elem.css("opacity"),visibility:a.elem.css("visibility"),display:a.elem.css("display")}))},s="undefined"!=typeof WebKitMutationObserver&&null!==WebKitMutationObserver?new WebKitMutationObserver(o):"undefined"!=typeof MutationObserver&&null!==MutationObserver?new MutationObserver(o):null,s.observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:["class","style"]})):"undefined"!=typeof MutationEvent&&null!==MutationEvent&&this.elem.on("DOMAttrModified",function(i){"class"===i.originalEvent.attrName?e(btnContainer).removeClass(i.originalEvent.prevValue).addClass(i.originalEvent.newValue):"style"===i.originalEvent.attrName&&e(btnContainer).css({display:t.style.display,visibility:t.style.visibility,opacity:t.style.opacity})}),console.log("Done with one.")},n.polyfills=[],n.prototype.getParams=function(){var e,i,n,o;return n=this.elem.attr("step"),i=this.elem.attr("min"),e=this.elem.attr("max"),o=this.elem.val(),/^-?\d+(?:\.\d+)?$/.test(n)||(n=null),/^-?\d+(?:\.\d+)?$/.test(i)||(i=null),/^-?\d+(?:\.\d+)?$/.test(e)||(e=null),/^-?\d+(?:\.\d+)?$/.test(o)||(o=i||0),{min:new t(i),max:new t(e),step:new t(n),val:new t(o)}},n.prototype.clipValues=function(e,t,i){return null!=i&&e.toFloat()>i.toFloat()?i:null!=t&&e.toFloat()<t.toFloat()?t:e},n.prototype.stepNormalize=function(e){return e},n.prototype.increment=function(){var e,t;this.elem.is(":disabled")||(console.log("increment() called."),t=this.getParams(),e=t.val.add(t.step),null!=t.max&&e.toFloat()>t.max.toFloat()&&(e=t.max),e=this.stepNormalize(e),this.elem.val(e).change())},n.prototype.decrement=function(){var e,t;this.elem.is(":disabled")||(console.log("decrement() called."),t=this.getParams(),e=t.val.subtract(t.step),null!=t.min&&e.toFloat()<t.min.toFloat()&&(e=t.min),e=this.stepNormalize(e),this.elem.val(e).change())},e(function(){e('input[type="number"]').inputNumber()}),void 0)})(jQuery)}).call(this);